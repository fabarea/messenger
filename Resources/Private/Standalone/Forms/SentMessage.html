<html
    data-namespace-typo3-fluid="true"
    lang=""

    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers">
<f:layout name="Default"/>
<f:section name="main">
    <f:be.pageRenderer
        includeJsFiles="{
                0: 'EXT:messenger/Resources/Public/JavaScript/Utils/Uri.js',
                1: 'EXT:messenger/Resources/Public/JavaScript/Utils/Typo3Lang.js',
                2: 'EXT:messenger/Resources/Public/JavaScript/Utils/RowsSelection.js',
                3: 'EXT:messenger/Resources/Public/JavaScript/SendAgainMenuItemNative.js',
                4: 'EXT:messenger/Resources/Public/JavaScript/DataExport.js',
                5: 'EXT:messenger/Resources/Public/JavaScript/EnqueueMessages.js',
                6: 'EXT:messenger/Resources/Public/JavaScript/UpdateRecipient.js'

            }"
        includeRequireJsModules="{
        0: 'TYPO3/CMS/Messenger/SendAgainMenuItemNative',
        1: 'TYPO3/CMS/Messenger/DataExport',
        2: 'TYPO3/CMS/Messenger/EnqueueMessages',
        3: 'TYPO3/CMS/Messenger/UpdateRecipient'}"
    />
    <form action="enqueue"
          class="m-2"
          id="form-bulk-send"
          method="post"
          role="form"
    >
        <div class="form-group">
            <label for="messenger-sender">Sender</label>
            <select class="form-control"
                    id="messenger-sender" name="sender">
                <f:for as="sender" each="{senders}">
                    <option value="{sender}">{sender}</option>
                </f:for>
            </select>
        </div>

        <div class="form-group">
            <label for="messenger-subject">Subject</label>
            <input class="form-control" id="messenger-subject"
                   name="subject"
                   required="required"
                   type="text"
                   value="{title}"/>

        </div>
        <div class="form-group">
            <div class="checkbox pt-2">
                <label for="has-body-text">
                    <input class="p-2 m-1"
                           id="has-body-text"
                           name="body-text"
                           onchange="this.checked
                        ? document.getElementById('message-body-container').style = 'display: block'
                        : document.getElementById('message-body-container').style = 'display: none';
                        "
                           type="checkbox" value="1">Replace message body by a free text instead of the page
                    content.</label>
            </div>
            <div id="message-body-container" style="display: none;">
                <label for="messenger-body">Body</label>
                <textarea
                    class="form-control p-0"
                    id="messenger-body"
                    name="body"
                    style="min-height: 100px"
                ></textarea>
            </div>
        </div>
        <div>
            <label for="has-body-test">
                <input class="p-2 m-1"
                       id="has-body-test"
                       onchange="this.checked
               ? (document.getElementById('recipient-test').style.display = 'block', this.value = '1')
               : (document.getElementById('recipient-test').style.display = 'none', this.value = '0')"
                       type="checkbox"
                       value="0">Send test</label>
        </div>
        <div class="form-group" id="recipient-test" style="display: none;">

            <label for="messenger-recipient-test">Test recipient(s) - max 10 emails</label>
            <input class="form-control" id="messenger-recipient-test"
                   name="recipientList"
                   type="text"/>
            <p class="bg-warning p-3 mt-2"> Emails are sent only to test emails if case checked</p>
        </div>
    </form>


</f:section>
</html>
