<div class="w-100">
    <div class="pull-left">
        <f:variable name="index" value="{currentPage - 1}"></f:variable>
        <f:variable name="startIndex" value="{index*itemsPerPages + 1}"></f:variable>
        <f:variable name="endIndex" value="{currentPage * itemsPerPages}" />
        <f:translate
            key="LLL:EXT:messenger/Resources/Private/Language/tx_messenger_domain_model_sentmessage.xlf:showing"
        />
        {startIndex}
        <f:translate key="LLL:EXT:messenger/Resources/Private/Language/tx_messenger_domain_model_sentmessage.xlf:to" />
        {endIndex}
        <f:translate key="LLL:EXT:messenger/Resources/Private/Language/tx_messenger_domain_model_sentmessage.xlf:of" />
        <f:format.number decimals="0"> {count}</f:format.number>
        <f:translate
            key="LLL:EXT:messenger/Resources/Private/Language/tx_messenger_domain_model_sentmessage.xlf:items"
        />
    </div>
    
    <div class="pull-right">
        <ul class="list-unstyled d-flex">
            <!-- Pagination simple -->
            <f:variable name="totalPages" value="{f:math.ceil(a: '{count / itemsPerPages}')}" />
            
            <!-- Bouton Précédent -->
            <f:if condition="{currentPage} > 1">
                <li>
                    <f:link.action
                        arguments="{page: {currentPage - 1}, sortBy: sortBy, direction: direction, searchTerm: searchTerm, items: itemsPerPages}"
                    >
                        <core:icon identifier="actions-chevron-left" size="small" />
                    </f:link.action>
                </li>
            </f:if>

            <!-- Pages -->
            <f:variable name="startPage" value="{f:math.max(a: 1, b: '{currentPage - 2}')}" />
            <f:variable name="endPage" value="{f:math.min(a: totalPages, b: '{currentPage + 2}')}" />
            
            <f:if condition="{startPage} > 1">
                <li>
                    <f:link.action
                        arguments="{page: 1, sortBy: sortBy, direction: direction, searchTerm: searchTerm, items: itemsPerPages}"
                    >
                        1
                    </f:link.action>
                </li>
                <f:if condition="{startPage} > 2">
                    <li><span>...</span></li>
                </f:if>
            </f:if>
            
            <f:for as="page" from="{startPage}" to="{endPage}">
                <li>
                    <f:if condition="{currentPage} == {page}">
                        <span class="active" style="font-weight: bold; background: #007cba; color: white; padding: 5px 10px; border-radius: 3px;">
                            {page}
                        </span>
                    </f:if>
                    <f:if condition="{currentPage} != {page}">
                        <f:link.action
                            arguments="{page: page, sortBy: sortBy, direction: direction, searchTerm: searchTerm, items: itemsPerPages}"
                            style="padding: 5px 10px; text-decoration: none; border: 1px solid #ddd; border-radius: 3px; margin: 0 2px;"
                        >
                            {page}
                        </f:link.action>
                    </f:if>
                </li>
            </f:for>
            
            <f:if condition="{endPage} < {totalPages}">
                <f:if condition="{endPage} < {totalPages - 1}">
                    <li><span>...</span></li>
                </f:if>
                <li>
                    <f:link.action
                        arguments="{page: totalPages, sortBy: sortBy, direction: direction, searchTerm: searchTerm, items: itemsPerPages}"
                    >
                        {totalPages}
                    </f:link.action>
                </li>
            </f:if>
            
            <!-- Bouton Suivant -->
            <f:if condition="{currentPage} < {totalPages}">
                <li>
                    <f:link.action
                        arguments="{page: {currentPage + 1}, sortBy: sortBy, direction: direction, searchTerm: searchTerm, items: itemsPerPages}"
                    >
                        <core:icon identifier="actions-chevron-right" size="small" />
                    </f:link.action>
                </li>
            </f:if>
        </ul>
    </div>
</div>
